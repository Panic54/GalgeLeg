<!DOCTYPE html>
<html>
<head>
<title>Galgeleg</title>

<meta charset="UTF-8">

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="ourJavascript.js" type="text/javascript"></script>

</head>
<body>

	<h1>Galgeleg</h1>
	<img id="galge" src="">

	<h2 id="restekst"></h2>

	<p id="word">Word:</p>

	<form>
		Guess letter: <br> <input type="text" id="letter"><br>
		<button id="guess" type="button">Guess</button>
	</form>

	<p id="usedLetters"></p>

	<script type="text/javascript">
	
	$(document).ready(function(){
		
		var imgPath = "C:/Users/Gustav Petersen/git/GalgeLeg/GalgeLeg/GRAFIK";
		var counter = 0;
		var gameover = false;
		$("#galge").prop("src", imgPath + "/galge.png")
		
		$.ajax({
			
			type	:	"POST",
			url		:	"Unknown",
			dataType:	"json",
			success	:	function(result){
				
				$("#word").text(result.word);
				
			}
			
		})
		
		$("#guess").on("Click",function(){
			
			var letter = $("#letter").val();
			
			if(gameover){
				
				gameover = false;
				window.location.replace("Next_page");
				
			}
			
			$.ajax({
				
				type		:	"POST",
				url			:	"Unknown",
				dataType	:	"json",	
				data		:	{"letter":letter},
				success		:	function(result){
					
					$("#usedLetters").append("[" + letter + "]"));
					
					if(result.status == miss){
						counter++;
						$("#galge").attr("src", imgPath + "/forkert" + counter + ".png")
					}
					
					if(result.status == won){
						counter = 0;
						gameover = true;
						$("#word").text("Word: " + result.word)
						$("#restekst").text("Du vandt!");
						$("#guess").prop("value", "Next");
					}
					
					if(result.status == lost){
						counter = 0;
						gameover = true;
						$("#restekst").text("Du tabte!");
						$("guess").prop("value", "Next");
					}
					
					if(result.status == hit){
						$("#word").text("Word: " + result.word)	
					}
					
				}
			})
			
		})
		
	})
	
	</script>


</body>
</html>